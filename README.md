IRC
===

**IRC (Internet Relay Chat)**
	- текстовый протокол, где клиент и сервер обмениваются сообщения в формате простыз текстовых строк; каждое сообщение заканчивается **\r\n** (CR+LF)

**Структура IRC сообщения**
	[:<prefix>] <command> [<params>] [:<trailing>]

	Prefix (optional)	- начинается с :, указывает
							источник сообщения
	Command				- сама команда
							(NICK, USER, JOIN, ...)
	Params				- параметры команды
							(разделены пробелами)
	Trailing			- последний параметр, может 
							содержать пробелы, начинается с :

**Необходимость использования статических методов**
	1. Нужно ли парсеру состояние?

		Что такое "состояние" парсера?

		Состояние - это данные, к-рые парсер должен помнить между вызовами. Например:
			- настройки парсинга
			- история предыдущих сообщений
			- контекст текущей сессии
			- счетчики или буферы
		
		IRC парсер - это "чистая" функция

		Каждое IRC сообщение - это независимая единица
		"NICK alice\r\n"			-> Полностью самостоятельное
		"JOIN #channel\r\n"			-> Не зависит от предыдущего
		"PRIVMSG bob :Hi!\r\n"		-> Не требует контекста

		Парсинг - это простое преобразование:
			Строка -> Структурированные данные
			Input -> Output
			Без побочных эффектов
	
	2. Почему статические методы идеальны для IRC?

		- Незаисимость сообщений (каждое сообщение парсится отдельно)
		- Нет конфигурации (IRC протокол имеет фиксированный формат)
		- Потокобезопасность (статические методы безопасны для многопоточности, разные клиенты могут парсить одновременно)

1. Создание структуры для хранения сообщений - Message.hpp

	- Почему std::vector<std::string> для params, а не просто std::string?
		
		Параметры - это отдельные аргументы команды, разделенные пробелами. Каждый параметр - это самостоятельная единица информации.

		- Команда MODE
		- Параметры:
			1. #channel (какой канал)
			2. +о (какой режим)
			3. tanja (на кого применить)

		Если бы мы использовали string, нам пришлось бы каждый раз парсить строку заново!
		С vector мы можем легко получить каждый параметр
			- params[0]; (получить канал -> "#channel")
			- params[1]; (получить режим -> "+o")
			- params[2]; (получить пользователя -> "tanja")
			- params.size(); (узнать количество параметров -> 3)

2. **Парсер**

	Пошаговый алгоритм парсинга:

	**Шаг 1:** Удаляем \r\n
	- они нам больше не нужны
	
	**Шаг 2:** Проверяем префикс
	- если строка начинается с :, значит есть префикс
	
	**Шаг 3:** Извлекаем команду
	- это всегда первое слово (после префикса, если он есть)
	
	**Шаг 4:** Обрабатываем параметры
	- все что осталось, разделяя обычные параметры и trailing

	1) Пишем функцию **stripCRLF()**

		**Шаг 1:** Проверяем длину
		- если меньше 2 символов, то там точно нет \r\n
		
		**Шаг 2:** Проверяем последние 2 символа
		
		**Шаг 3:** Используем substr(0, length-2) чтобы вернуть все кроме последних 2 символов
	
	2) Пишем функцию **extractPrefix()**

		**Шаг 1:** Префикс всегда начинается с :
		
		**Шаг 2:** Префикс заканчивается первым пробелом
		
		**Шаг 3:** Мы изменяем исходную строку, удаляя из нее префикс


	3) Пишем функцию **extractCommand()**

		Команда - это обязательная часть сообщения, к-рая говорит ЧТО нужно сделать. Идет сразу после префикса (если он есть) и заканчивается пробелом или концом строки

		Правила для команд:
			- Команда может быт словом: NICK, JOIN, PRIVMSG
			- числовым кодом: 001, 433, 461
			- команды-слова должны быть в верхнем регистре
			- команда не может содержать пробелы
		
		**Шаг 1:** Проверяем что строка не пустая
		- Если пустая - это ошибка протокола

		**Шаг 2:** Ищем первый пробел
		- `find(' ')` возвращает позицию пробела или `npos` если не найден

		**Шаг 3:** Извлекаем команду
		- Если пробела нет - вся строка это команда (например, просто "QUIT")
		- Если пробел есть - берем всё до пробела

		**Шаг 4:** Дополнительная проверка
		- На всякий случай проверяем что команда не пустая

5. Парсинг параметров

	В IRC есть два вида параметров:
	1. **Обычные параметры** - разделены пробелами, не могут содержать пробелы
	2. **Trailing параметр** - начинается с `:`, может содержать пробелы, всегда последний

	Примеры:
		NICK alice                      # 1 обычный параметр
		JOIN #channel                   # 1 обычный параметр  
		MODE #channel +o bob            # 3 обычных параметра
		PRIVMSG bob :Hello there!       # 1 обычный + 1 trailing
		TOPIC #channel :New topic here  # 1 обычный + 1 trailing

