<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36" version="29.2.9">
  <diagram name="IRC Server Flow" id="irc-server-bpmn">
    <mxGraphModel dx="2527" dy="785" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="1654" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="start" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Start&#xa;main()" vertex="1">
          <mxGeometry height="80" width="80" x="40" y="430" as="geometry" />
        </mxCell>
        <mxCell id="validate-args" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Validate&#xa;arguments&#xa;(argc == 3)" vertex="1">
          <mxGeometry height="100" width="90" x="215" y="420" as="geometry" />
        </mxCell>
        <mxCell id="edge1" edge="1" parent="1" source="start" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="validate-args" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="error-exit" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Print error&#xa;and exit" vertex="1">
          <mxGeometry height="60" width="120" x="420" y="440" as="geometry" />
        </mxCell>
        <mxCell id="edge2" edge="1" parent="1" source="validate-args" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="error-exit" value="No">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="end-error" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="End" vertex="1">
          <mxGeometry height="60" width="60" x="710" y="440" as="geometry" />
        </mxCell>
        <mxCell id="edge3" edge="1" parent="1" source="error-exit" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="end-error" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="validate-port" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Validate port&#xa;(1024-65535)" vertex="1">
          <mxGeometry height="90" width="100" x="210" y="570" as="geometry" />
        </mxCell>
        <mxCell id="edge4" edge="1" parent="1" source="validate-args" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="validate-port" value="Yes">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge5" edge="1" parent="1" source="validate-port" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="error-exit" value="No">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="480" y="620" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="create-server" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Create Server object - Server(port, password)" vertex="1">
          <mxGeometry height="30" width="240" x="139.77999999999997" y="700" as="geometry" />
        </mxCell>
        <mxCell id="edge6" edge="1" parent="1" source="validate-port" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="create-server" value="Yes">
          <mxGeometry relative="1" x="-0.4998" as="geometry">
            <mxPoint as="offset" />
            <Array as="points">
              <mxPoint x="260" y="620" />
              <mxPoint x="260" y="820" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="ignore-sigpipe" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="ignore_sigpipe() - &lt;i&gt;block SIGPIPE&lt;/i&gt;" vertex="1">
          <mxGeometry height="30" width="240" x="139.78" y="750" as="geometry" />
        </mxCell>
        <mxCell id="edge7" edge="1" parent="1" source="create-server" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="ignore-sigpipe" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="init-socket" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;align=left;spacingLeft=5;fontStyle=1;fontFamily=Helvetica;" value="&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; initSocket(port)&lt;br&gt;1. socket()&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;4. listen()&lt;br&gt;2. setsockopt()&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;5.set_non_blocking&lt;br&gt;3. bind()&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; (fcntl(&lt;font style=&quot;font-size: 9px;&quot;&gt;O_NONBLOCK&lt;/font&gt;))" vertex="1">
          <mxGeometry height="60" width="240" x="139.78" y="800" as="geometry" />
        </mxCell>
        <mxCell id="edge8" edge="1" parent="1" source="ignore-sigpipe" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="init-socket" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="260" y="780" />
              <mxPoint x="260" y="780" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cmd-handler" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Create CommandHandler" vertex="1">
          <mxGeometry height="30" width="240" x="140.28" y="880" as="geometry" />
        </mxCell>
        <mxCell id="edge9" edge="1" parent="1" source="init-socket" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="cmd-handler" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="add-poll" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Add listen_fd&amp;nbsp; to&amp;nbsp; m_poll_fds" vertex="1">
          <mxGeometry height="30" width="240" x="139.99999999999997" y="930" as="geometry" />
        </mxCell>
        <mxCell id="edge10" edge="1" parent="1" source="cmd-handler" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="add-poll" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="signal-handlers" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Setup signal handlers SIGINT / SIGTERM" vertex="1">
          <mxGeometry height="30" width="240" x="139.99999999999997" y="980" as="geometry" />
        </mxCell>
        <mxCell id="edge11" edge="1" parent="1" source="add-poll" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="signal-handlers" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="run-loop" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="server.run() - &lt;i&gt;main loop&lt;/i&gt;" vertex="1">
          <mxGeometry height="30" width="240" x="139.99999999999997" y="1030" as="geometry" />
        </mxCell>
        <mxCell id="edge12" edge="1" parent="1" source="signal-handlers" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="run-loop" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="poll-wait" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="poll()&amp;nbsp; - &lt;i&gt;wait for events on all sockets&lt;/i&gt;" vertex="1">
          <mxGeometry height="30" width="240" x="139.99999999999997" y="1080" as="geometry" />
        </mxCell>
        <mxCell id="edge13" edge="1" parent="1" source="run-loop" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="poll-wait" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="check-running" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="m_running?" vertex="1">
          <mxGeometry height="80" width="90" x="215" y="1175" as="geometry" />
        </mxCell>
        <mxCell id="edge14" edge="1" parent="1" source="poll-wait" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="check-running" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="socket-type" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Descriptor&#xa;type?" vertex="1">
          <mxGeometry height="80" width="95.28" x="210.28" y="1300" as="geometry" />
        </mxCell>
        <mxCell id="edge15" edge="1" parent="1" source="check-running" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="socket-type" value="Yes">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="accept-client" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;align=left;spacingLeft=5;fontStyle=1;fontFamily=Helvetica;" value="acceptClient()&#xa;• accept()&#xa;• set_non_blocking()&#xa;• add to m_poll_fds&#xa;• create Client" vertex="1">
          <mxGeometry height="60" width="110" x="80" y="1420" as="geometry" />
        </mxCell>
        <mxCell id="edge16" edge="1" parent="1" source="socket-type" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fontStyle=1;fontFamily=Helvetica;" target="accept-client" value="listen_fd&#xa;(new connection)">
          <mxGeometry relative="1" x="-0.3125" as="geometry">
            <mxPoint x="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="event-type" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Event&#xa;type?" vertex="1">
          <mxGeometry height="80" width="100" x="350" y="1367.5" as="geometry" />
        </mxCell>
        <mxCell id="edge17" edge="1" parent="1" source="socket-type" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontStyle=1;fontFamily=Helvetica;" target="event-type" value="client_fd">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="disconnect-error" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="disconnectClient()&#xa;(error/hangup)" vertex="1">
          <mxGeometry height="55" width="80" x="710" y="1380" as="geometry" />
        </mxCell>
        <mxCell id="edge18" edge="1" parent="1" source="event-type" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="disconnect-error" value="POLLERR&#xa;POLLHUP">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="receive-data" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;align=left;spacingLeft=5;fontStyle=1;fontFamily=Helvetica;" value="receiveData()&#xa;• recv() in loop&#xa;• add to inbuf&#xa;• extract commands" vertex="1">
          <mxGeometry height="70" width="100" x="209.78" y="1500" as="geometry" />
        </mxCell>
        <mxCell id="edge19" edge="1" parent="1" source="event-type" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontStyle=1;fontFamily=Helvetica;" target="receive-data" value="POLLIN&#xa;(data to read)">
          <mxGeometry relative="1" x="-0.562" as="geometry">
            <mxPoint as="offset" />
            <Array as="points">
              <mxPoint x="260" y="1408" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="has-cmd" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Has complete&#xa;command?" vertex="1">
          <mxGeometry height="80" width="100" x="210.28" y="1610" as="geometry" />
        </mxCell>
        <mxCell id="edge20" edge="1" parent="1" source="receive-data" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="has-cmd" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="handle-cmd" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;align=left;spacingLeft=5;fontStyle=1;fontFamily=Helvetica;" value="handleCommand()&lt;br&gt;• parsing&lt;br&gt;• routing&lt;br&gt;• processing" vertex="1">
          <mxGeometry height="55" width="115" x="202.28" y="1720" as="geometry" />
        </mxCell>
        <mxCell id="edge21" edge="1" parent="1" source="has-cmd" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="handle-cmd" value="Yes">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="add-outbuf" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Add response&#xa;to outbuf&#xa;enable POLLOUT" vertex="1">
          <mxGeometry height="50" width="110" x="340" y="1760" as="geometry" />
        </mxCell>
        <mxCell id="edge22" edge="1" parent="1" source="handle-cmd" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="add-outbuf" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="390" y="1730" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="send-data" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;align=left;spacingLeft=5;fontStyle=1;fontFamily=Helvetica;" value="sendData()&#xa;• send() from outbuf&#xa;• remove sent data&#xa;• disable POLLOUT" vertex="1">
          <mxGeometry height="70" width="100" x="350" y="1500" as="geometry" />
        </mxCell>
        <mxCell id="edge23" edge="1" parent="1" source="event-type" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fontStyle=1;fontFamily=Helvetica;" target="send-data" value="POLLOUT&#xa;(ready to write)">
          <mxGeometry relative="1" x="-0.1429" as="geometry">
            <mxPoint as="offset" />
            <Array as="points">
              <mxPoint x="400" y="1480" />
              <mxPoint x="400" y="1480" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="edge24" edge="1" parent="1" source="accept-client" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-100" y="1450" />
              <mxPoint x="-100" y="1150" />
              <mxPoint x="260" y="1150" />
            </Array>
            <mxPoint x="-20.11" y="1530" as="sourcePoint" />
            <mxPoint x="259.89" y="1180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge25" edge="1" parent="1" source="has-cmd" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="990" y="1650" />
              <mxPoint x="990" y="1170" />
              <mxPoint x="270" y="1170" />
            </Array>
            <mxPoint x="310" y="1650" as="sourcePoint" />
            <mxPoint x="269.89" y="1200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge25-label" connectable="0" parent="edge25" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="No" vertex="1">
          <mxGeometry relative="1" x="-0.8" as="geometry">
            <mxPoint x="-164" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge26" edge="1" parent="1" source="add-outbuf" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="920" y="1785" />
              <mxPoint x="920" y="1180" />
            </Array>
            <mxPoint x="259.89" y="1180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge27" edge="1" parent="1" source="send-data" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="830" y="1525" />
              <mxPoint x="830" y="1150" />
              <mxPoint x="260" y="1150" />
            </Array>
            <mxPoint x="850" y="1580" as="sourcePoint" />
            <mxPoint x="259.89" y="1180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="edge28" edge="1" parent="1" source="disconnect-error" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="check-running" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="750" y="1215" />
            </Array>
            <mxPoint x="259.89" y="1180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="stop-server" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;align=left;spacingLeft=5;fontStyle=1;fontFamily=Helvetica;" value="&lt;span&gt;server.stop()&lt;br&gt;• notify clients&lt;br&gt;• disconnect all&lt;br&gt;• close listen_fd&lt;/span&gt;" vertex="1">
          <mxGeometry height="70" width="100" x="-40" y="1180" as="geometry" />
        </mxCell>
        <mxCell id="edge29" edge="1" parent="1" source="check-running" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="stop-server" value="No&#xa;(signal)">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="end" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="End&#xa;(exit from main)" vertex="1">
          <mxGeometry height="80" width="80" x="-30" y="1280" as="geometry" />
        </mxCell>
        <mxCell id="edge30" edge="1" parent="1" source="stop-server" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;fontStyle=1;fontFamily=Helvetica;" target="end" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="legend-box" parent="1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;fontStyle=1;align=left;verticalAlign=top;spacingLeft=10;spacingTop=5;fontFamily=Helvetica;" value="Legend" vertex="1">
          <mxGeometry height="220" width="200" x="920" y="360" as="geometry" />
        </mxCell>
        <mxCell id="legend-start" parent="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Start/End" vertex="1">
          <mxGeometry height="50" width="50" x="940" y="390" as="geometry" />
        </mxCell>
        <mxCell id="legend-task" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Action" vertex="1">
          <mxGeometry height="40" width="80" x="1020" y="395" as="geometry" />
        </mxCell>
        <mxCell id="legend-gateway" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Condition" vertex="1">
          <mxGeometry height="50" width="70" x="940" y="460" as="geometry" />
        </mxCell>
        <mxCell id="legend-error" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Error" vertex="1">
          <mxGeometry height="40" width="70" x="1030" y="465" as="geometry" />
        </mxCell>
        <mxCell id="legend-loop" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Main loop" vertex="1">
          <mxGeometry height="35" width="80" x="940" y="530" as="geometry" />
        </mxCell>
        <mxCell id="legend-cmd" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=1;fontFamily=Helvetica;" value="Processing" vertex="1">
          <mxGeometry height="35" width="75" x="1035" y="530" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
